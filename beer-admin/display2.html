 <!DOCTYPE html>
<html>
    <head>
    <title>Pour House Grill Beer Display</title>
  <!-- StyleSheets (CSS) -->
		<!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />  -->
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.css" /> 
	 <link rel="stylesheet" href="/css/swipe_style.css" />
	
	  <link rel="stylesheet" href="/css/themes/pourhouse.css" /> 
	 <link rel="stylesheet" href="/css/themes/jqm-icon-pack-2.0-original.css" />   
	 
	 <!--<link rel="stylesheet" href="css/screen-view.css" />--> 
	 
	  <link rel="stylesheet" href="/css/jsShare.css" />
	   <link rel="stylesheet" id="camera-css"  href="/css/camera.css" type="text/css" media="all"> 
	   <link rel="stylesheet" href="/css/jquery-mobile-fluid960.min.css" /> 
	   <link rel="stylesheet" href="/css/display2.css" /> 	
	 <!-- JavaScripts -->
	 <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	 <script src="/js/modernizr-latest.js" type="text/javascript"></script>
	 <!--<script src="/js/custom.js"></script>-->
	 <!--<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>-->
	 <script src="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js"></script>
	
	 <script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script> 
	 <script src="/js/jquery.ui.map.js" type="text/javascript"></script>
	 <script src="/js/jquery.ui.map.full.min.js" type="text/javascript"></script>
	 <script src="/js/jquery.ui.map.services.min.js" type="text/javascript"></script>
	 <script src="/js/swipe.js"  type="text/javascript"></script>
	 <script src="/js/jsShare.js"  type="text/javascript"></script>
 
	 <script type="text/javascript" src="/js/jquery.easing.1.3.js"></script> 
     <script type="text/javascript" src="/js/camera.min.js"></script> 
     <script type="text/javascript" src="/js/jquery.dotdotdot.min.js"></script> 
  
      

</head>
<body>
    <script>
    


      
        
         function onSuccessBeerList(data, status)
        {
 
             
              
			 					    					 
								   
            Object.keys(data).forEach(function(key) {
            
            $('#beers-gridview').append('<a id="'+data[key].id+'" href="#" data-role="button" data-inline="true" data-theme="b" class="col1"><img class="ui-li-thumb" src="'+data[key].beer_label_url+'"/><h3 class="ui-li-heading">'+data[key].beer_name+'</h3><p class="beer-style">'+data[key].beer_style+'</p><p  class="brewery-name">'+data[key].brewery_name+'</p><p  class="brewery-city">'+data[key].brewery_city+'</p><p  class="ui-li-desc brewery-durl">'+data[key].brewery_url+'</p><p  class="ui-li-desc beer-desc">'+data[key].beer_desc+'</p><p class="ui-li-desc beer-abv">ABV: '+data[key].beer_abv+'%</p><p class="ui-li-desc beer-ibu">IBUs: '+data[key].beer_ibu+'</p><p class="ui-li-desc beer-glass">Pint: $'+data[key].beer_glass_price+'</p><p class="ui-li-desc beer-growler">Growler: $'+data[key].beer_growler_price+'</p></a>');
              $('#beers-gridview').trigger('create');

         
           // $('#beers-listview').append('<li data-theme="b"><img src="'+data[key].beer_label_url+'"/><h3>'+data[key].beer_name+'</h3><p>'+data[key].brewery_name+'<p><p>'+data[key].beer_style+'<p></li>');
            //$('#beers-listview').listview('refresh');
             
            
            $('#splash-block').append('<div class="beer-slide" data-src="'+data[key].beer_label_url+'" data-transPeriod="0"><div class="camera_caption fadeIn beer-splash frontpageshowcase" ><a  id="'+data[key].beer_name+'-splash" href="#" data-role="button" data-inline="true" data-theme="b" class="colx"><p class="ui-li-desc label-block"><img class="ui-li-thumb" src="'+data[key].beer_label_url+'"/><span class="beer-style">'+data[key].beer_style+'</span><br /><span class="beer-abv">ABV: &nbsp;'+data[key].beer_abv+'%</span><br /><span class="beer-ibu">IBUs: '+data[key].beer_ibu+'</span></p><h3 class=" beer-name">'+data[key].beer_name+'</h3><p  id="beer-desc" class="ui-li-desc beer-desc">'+data[key].beer_desc+'</p><p class="ui-li-desc brewery-block"><img class="ui-li-thumb brewery-label" src="'+data[key].brewery_label_url+'"/><span  class="brewery-name">'+data[key].brewery_name+'</span><br /><span  class="brewery-city ">'+data[key].brewery_city+'</span><br /><span  class="brewery-url">'+data[key].brewery_url+'</span></p><p><span class="ui-li-desc beer-glass">Pint: $'+data[key].beer_glass_price+'</span><span class="ui-li-desc beer-growler">Growler: $'+data[key].beer_growler_price+'</span></p></a></div></div>');
    });
    
              $('.beer-desc').dotdotdot();
			 
			   var ind=-1;
			   var flg='s';
			  $('#splash-block').camera({thumbnails: false,  loader: 'none',transperiod: 500, time: 10000,fx:'scrollRight', opacityOnGrid: false, pagination: false,height: '106%',portrait:false, onLoaded: function(){
			 			    ind++;
			    
			    
		
			     if (ind <= 21){var beerid = '#'+data[ind].id;}else{var beerid = '#'+data[0].id;}
			    
			   
			    if(ind == 0){
			    for(var i=12; i<=21; i++){ 
				  var lastid = data[i].id; 
				  var beer = '#'+lastid; 
				  if(flg == 's'){$(beer).slideUp('slow');}
				  }
				  }
			   
			    
			    if(ind == 12){
			      for(var i=0; i<=11; i++){ 
				  var lastid = data[i].id; 
				  var beer = '#'+lastid; 
				  if(flg == 's'){$(beer).slideUp('slow');}
				  }
				  for(var i=12; i<=21; i++){ 
				  var lastid = data[i].id; 
				  var beer = '#'+lastid; 
				  if(flg == 's'){$(beer).slideDown('slow');}
				  }
			    }
			    else if(ind == 21){
				 if(flg == 's'){$('#splash-block').slideUp();flg='m';} else{$('#splash-block').css('box-shadow', 'inset 0 0   20px yellow').slideDown('slow');flg='s';} 
				 for(var x=0; x<=11; x++){ 
				  var lastid = data[x].id; 
				  var beer = '#'+lastid; 
				  $(beer).slideDown('slow'); 
				  }  
				  ind=-1; 
			    }
			    
			/*     if(ind >= 1 && !(isOdd(ind)) ){ 
			    var lastindex = ind-1;
			     var lastid = data[lastindex].id;
			    var lastbeer = '#'+lastid;

			     var lastindex2 = ind-2;
			     var lastid2 = data[lastindex2].id;
			      var lastbeer2 = '#'+lastid2;
			     //alert(lastindex2+' '+lastindex+' '+ind);
			     var lastid = data[lastindex].id;
			       $(lastbeer2).slideUp('slow');
			   // $(beerid).hide();
			     } */
			    function isOdd(num) { return num % 2;}
			    
				 $('.col1').css('box-shadow', 'none');
			       $(beerid).css('box-shadow', 'inset 0 0   20px yellow'); 
			     
			     
			       
			     
			   //  alert($(beerid)[0].outerHTML);
			     
			    //$('#beers-gridview').append($(beerid)[0].outerHTML);
			  }    
			  
			  });
			 
			 
			  
			  /* $('#splash-block').css('border','0px solid green') */

			 //$('#beer-feature').load('beercamera.html #beer-camera',function(){
			 					   								  //$('#splash-block').camera({loader:'none', pagination: false, thumbnails: false, navigation: false,time:3000, transPeriod:750,fx:'simpleFade',height: '70%',portrait:false});
								// getSoup();
								  //});	
		  
        }

        
                function onError(data, status)
        {
            // handle an error
            alert('error_getBeer'+status);
        }   
        
            
  
    
  
			
			function listBeers(beerstatus){ 
				 //alert('getBeer'+beerid);
                //var formData = $("#callAjaxForm").serialize();
				 
                $.ajax({
                    type: "POST",
                    url: "listbeers.php",
                    cache: false,
                    //data: formData,
                    data: {beer_status : beerstatus},
                    dataType:"json",
                    success: onSuccessBeerList,
                    error: onError
                });
			}	

  
        $(document).ready(function() {
        
        
        				
			//getBeer(0);
            listBeers('ACTIVE');
             
                       
        });
    </script>
  
    <!-- call ajax page -->
    <div data-role="page" id="callAjaxPage" data-theme="d"  >
      <!--  <div data-role="header"  data-theme="b">
            <h1>Beers Display</h1>
        </div>-->
  
        <div data-role="content" style="background:#c7b299">
        
       
        <div id="main-wrapper">
        
        <div id="beer-camera"></div>
        
                 <div id="beers-gridview">
         
	         <a href="#" data-inline="true" data-theme="b"  style="float:left;width:49.5%;margin-right:15px;"><div id="splash-block"></div></a>
         </div> 

        	<ul id="beers-listview" data-role="listview" data-theme="b" data-inset="true" style="display:none;">
        <li>
        <h3>Pour House Grill Beer Selection</h3>
        <p>Here is a list of all our current beers on tap and growler.</p>
       
        </li>
        </ul>
                          </div>
        
        <div style="text-align:center;display:none;">
        <img id="admin-qrcode" src="../images/qrcode_beer-admin.png"  />
        </div>
        
        
        
        
        </div>
  
        <!--<div data-role="footer" data-theme="b">
            <h1>Beers</h1>
        </div>-->
    </div>
</body>
</html>